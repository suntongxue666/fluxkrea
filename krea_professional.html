<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Flux Krea AI - Free AI Image Generator, Fast HD Art Creation</title>
    <meta name="description" content="Create stunning AI images from text prompts powered by Flux.1 Krea dev Model, No-Signup,High-Quality, Realistic 4K art creation and maker in secongs.">
    <meta name="keywords" content="Flux Krea,AI image generator,Free AI art generator, Text to image, Free image generator, Professional AI images, FLUX.1 Krea,Free Image Generation, AI Art Creation">
    <meta name="author" content="FLUX Krea AI">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Flux Krea AI - Free AI Image Generator, Fast HD Art Creation">
    <meta property="og:description" content="Create stunning, professional-quality images from text prompts using advanced FLUX AI technology. Generate images in seconds with superior quality and control.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://flux-krea-ai.com">
    <meta property="og:image" content="https://flux-krea-ai.com/og-image.jpg">
    
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Flux Krea AI - Free AI Image Generator, Fast HD Art Creation">
    <meta name="twitter:description" content="Generate high-quality AI images instantly with FLUX Krea AI. Professional results in seconds.">
    <meta name="twitter:image" content="https://flux-krea-ai.com/twitter-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://flux-krea-ai.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://ciwjjfcuhubjydajazkk.supabase.co/storage/v1/object/public/webstie-icon//FluxKrea%20log-120.png">
    <link rel="apple-touch-icon" href="https://ciwjjfcuhubjydajazkk.supabase.co/storage/v1/object/public/webstie-icon//FluxKrea%20log-120.png">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HRV45ZRFKT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HRV45ZRFKT');
    </script>
    
    <!-- Supabase Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- External Resources -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "FLUX Krea AI",
        "description": "Professional AI Image Generator powered by FLUX technology",
        "url": "https://flux-krea-ai.com",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "creator": {
            "@type": "Organization",
            "name": "FLUX Krea AI"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f8fafc;
            color: #1a202c;
            line-height: 1.6;
        }
        
        /* Header Navigation */
        .header {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            padding: 16px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: 700;
            color: #6366f1;
            text-decoration: none;
        }
        
        .logo-icon {
            width: 36px;
            height: 36px;
            background: transparent;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            overflow: hidden;
        }
        
        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .nav-links {
            display: flex;
            gap: 32px;
            list-style: none;
            align-items: center;
        }
        
        .nav-links a {
            text-decoration: none;
            color: #64748b;
            font-weight: 500;
            font-size: 16px;
            transition: color 0.2s;
        }
        
        .nav-links a.active {
            color: #6366f1;
            font-weight: 600;
        }
        
        .nav-links a:hover {
            color: #6366f1;
        }
        
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .credits-display {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }
        
        .credits-display i {
            color: #ff8c00;
        }
        
        .signin-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #ffffff;
            border: 1px solid #dadce0;
            border-radius: 8px;
            color: #3c4043;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .signin-btn:hover {
            background: #f8f9fa;
            border-color: #dadce0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        .google-icon {
            width: 18px;
            height: 18px;
            background: url('https://www.gstatic.com/marketing-cms/assets/images/76/76/c79495454250aaacab1867bdcda4/about-10things-g.png') no-repeat center;
            background-size: contain;
        }
        
        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 32px 60px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero-badge {
            display: inline-block;
            background: #e0e7ff;
            color: #6366f1;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 24px;
        }
        
        .hero-badges {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        
        .badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: white;
        }
        
        .badge.orange {
            background: #f97316;
        }
        
        .badge.green {
            background: #10b981;
        }
        
        .badge.blue {
            background: #3b82f6;
        }
        
        .badge.purple {
            background: #8b5cf6;
        }
        
        .hero h1 {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 24px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }
        
        .hero p {
            font-size: 16px;
            color: #64748b;
            margin: 0px 0px 0px;
            line-height: 1.6;
        }
        
        /* Main Generator */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 48px;
            margin: 0px 0px 60px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .card h2 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-subtitle {
            color: #64748b;
            margin-bottom: 32px;
            font-size: 16px;
        }
        
        /* Generation Mode */
        .mode-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 600;
            font-size: 16px;
            position: relative;
        }
        
        .mode-btn.active {
            border-color: #6366f1;
            background: #6366f1;
            color: white;
        }
        
        .mode-btn:hover:not(.active) {
            border-color: #6366f1;
            background: #f8faff;
        }
        
        .coming-soon {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #f97316;
            color: white;
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 8px;
            text-transform: uppercase;
        }
        
        /* Prompt Input */
        .prompt-section h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #374151;
        }
        
        .prompt-textarea {
            width: 100%;
            min-height: 120px;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            resize: vertical;
            transition: border-color 0.2s;
            font-family: inherit;
            display: flex;
            align-items: center;
            vertical-align: middle;
        }
        
        .prompt-textarea::placeholder {
            color: rgba(100, 116, 139, 0.5);
            opacity: 1;
        }
        
        .prompt-textarea:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .copy-btn {
            margin-top: 12px;
            margin-right: 8px;
            padding: 8px 16px;
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            color: #64748b;
            transition: all 0.2s;
        }
        
        .copy-btn:hover {
            background: #e2e8f0;
        }
        
        .clear-btn {
            margin-top: 12px;
            padding: 8px 16px;
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            color: #64748b;
            transition: all 0.2s;
        }
        
        .clear-btn:hover {
            background: #fee2e2;
            color: #dc2626;
            border-color: #fca5a5;
        }
        
        /* Settings */
        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .setting-item label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .setting-item select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            font-size: 16px;
            transition: border-color 0.2s;
        }
        
        .setting-item select:focus {
            outline: none;
            border-color: #6366f1;
        }
        
        .slider-container {
            grid-column: span 2;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #6366f1;
            cursor: pointer;
        }
        
        .slider-value {
            float: right;
            font-weight: 600;
            color: #6366f1;
        }
        
        /* Generate Button */
        .generate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }
        
        .generate-btn .btn-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .generate-btn .credits-cost {
            font-size: 12px;
            opacity: 0.9;
            font-weight: 500;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Result Section */
        .result-placeholder {
            text-align: center;
            padding: 80px 24px;
            color: #94a3b8;
        }
        
        .result-placeholder i {
            font-size: 64px;
            margin-bottom: 24px;
            opacity: 0.5;
        }
        
        .result-image {
            width: 100%;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .loading {
            text-align: center;
            padding: 80px 24px;
            color: #6366f1;
        }
        
        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 24px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Steps Section */
        .steps-section {
            background: white;
            padding: 60px 0;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 36px;
        }
        
        .section-header h2 {
            font-size: 40px;
            font-weight: 800;
            margin-bottom: 24px;
            color: #1a202c;
        }
        
        .section-header p {
            font-size: 20px;
            color: #64748b;
            max-width: 1120px;
            margin: 0 auto;
        }
        
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 48px;
        }
        
        .step-card {
            text-align: center;
            padding: 32px;
        }
        
        .step-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            color: white;
            font-size: 32px;
        }
        
        .step-card h3 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #1a202c;
        }
        
        .step-card p {
            color: #64748b;
            line-height: 1.6;
        }
        
        /* Features Section */
        .features-section {
            background: #f8fafc;
            padding: 60px 0;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 48px;
            margin-top: 80px;
        }
        
        .feature-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .feature-image {
            margin-bottom: 24px;
        }
        
        .feature-image img {
            width: 100%;
            border-radius: 12px;
        }
        
        .feature-card h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #1a202c;
        }
        
        .feature-card p {
            color: #64748b;
            line-height: 1.6;
            margin-bottom: 24px;
            flex-grow: 1;
        }
        
        .demo-btn {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            padding: 12px 36px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            width: 180px;
            justify-content: center;
            margin: 0 auto;
            align-self: flex-end;
        }
        
        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        /* CTA Buttons */
        .cta-btn {
            display: inline-block;
            padding: 16px 32px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            font-size: 18px;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .cta-btn.primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }
        
        .cta-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        /* Testimonials Section */
        .testimonials-section {
            background: white;
            padding: 60px 0;
        }
        
        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            margin-top: 80px;
        }
        
        .testimonial-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .stars {
            color: #fbbf24;
            margin-bottom: 24px;
            font-size: 18px;
        }
        
        .testimonial-card p {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 24px;
            font-style: italic;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .author-avatar {
            width: 48px;
            height: 48px;
            background: #6366f1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
        }
        
        .author-name {
            font-weight: 600;
            color: #1a202c;
        }
        
        .author-title {
            color: #64748b;
            font-size: 14px;
        }
        
        .stats {
            text-align: center;
            margin-top: 80px;
        }
        
        .stats-grid {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 80px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 40px;
            font-weight: 800;
            color: #6366f1;
        }
        
        .stat-label {
            color: #64748b;
            font-size: 16px;
        }
        
        /* FAQ Section */
        .faq-section {
            background: #f8fafc;
            padding: 60px 0;
        }
        
        .faq-container {
            max-width: 800px;
            margin: 80px auto 0;
        }
        
        .faq-item {
            background: white;
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .faq-question {
            padding: 24px 32px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }
        
        .faq-question:hover {
            background: #f8fafc;
        }
        
        .faq-question h3 {
            font-size: 18px;
            font-weight: 600;
            color: #1a202c;
            margin: 0;
        }
        
        .faq-question i {
            color: #64748b;
            transition: transform 0.2s;
        }
        
        .faq-answer {
            padding: 0 32px 24px;
            display: none;
        }
        
        .faq-answer p {
            color: #64748b;
            line-height: 1.6;
            margin: 0;
        }
        
        .faq-item.active .faq-answer {
            display: block;
        }
        
        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }
        
        /* Footer */
        .footer {
            background: #1a202c;
            color: white;
            padding: 80px 0 32px;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 48px;
            margin-bottom: 48px;
        }
        
        .footer-logo {
            color: white;
            margin-bottom: 24px;
        }
        
        .footer-description {
            color: #94a3b8;
            line-height: 1.6;
            margin-bottom: 24px;
        }
        
        .social-links {
            display: flex;
            gap: 16px;
        }
        
        .social-links a {
            color: #94a3b8;
            font-size: 20px;
            transition: color 0.2s;
        }
        
        .social-links a:hover {
            color: #6366f1;
        }
        
        .footer-section h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 24px;
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #94a3b8;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .footer-bottom {
            border-top: 1px solid #374151;
            padding-top: 32px;
            text-align: center;
            color: #94a3b8;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            /* 移动端登录按钮样式 */
            .signin-btn {
                display: flex !important;
                padding: 6px 12px;
                font-size: 12px;
            }
            
            /* 移动端显示积分显示 */
            .credits-display {
                display: flex !important;
            }
            
            .hero h1 {
                font-size: 32px;
            }
            
            .hero p {
                font-size: 18px;
            }
            
            .main-grid {
                grid-template-columns: 1fr;
                gap: 32px;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .mode-buttons {
                flex-direction: column;
            }
            
            .section-header h2 {
                font-size: 32px;
            }
            
            .stats-grid {
                gap: 40px;
            }
        }

        /* Showcase Modal */
        .showcase-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .showcase-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .showcase-content {
            text-align: center;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .showcase-image {
            width: 1024px;
            height: 1024px;
            max-width: min(90vw, 1024px);
            max-height: min(calc(100vh - 200px), 1024px);
            object-fit: cover;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
            aspect-ratio: 1/1;
        }

        .showcase-title {
            color: white;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
            margin-top: 0;
        }

        .showcase-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 18px;
            margin-bottom: 32px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .showcase-get-started {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }

        .showcase-get-started:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .showcase-indicators {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: white;
            transform: scale(1.2);
        }

        @media (max-width: 768px) {
            .showcase-image {
                width: 90vw;
                height: 90vw;
                max-height: 90vw;
                aspect-ratio: 1/1;
            }

            .showcase-title {
                font-size: 24px;
            }

            .showcase-description {
                font-size: 16px;
            }
        }
        
        /* Generated Image Result Styles */
        .result-success {
            text-align: center;
            padding: 24px;
        }
        
        .generated-image {
            width: 100%;
            max-width: 512px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin-bottom: 16px;
        }
        
        .result-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 16px;
        }
        
        .action-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        .generation-info {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .result-error {
            text-align: center;
            padding: 48px;
            color: #dc3545;
        }
        
        .result-error i {
            font-size: 48px;
            margin-bottom: 24px;
        }
        
        .result-error h3 {
            font-size: 24px;
            margin-bottom: 16px;
        }
        
        .generating-status {
            text-align: center;
            padding: 60px 24px;
            color: #6366f1;
        }
        
        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 24px;
        }
        
        /* Insufficient Credits Modal */
        .credits-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .credits-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .credits-modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .credits-modal.active .credits-modal-content {
            transform: scale(1);
        }
        
        .credits-modal-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            color: white;
            font-size: 36px;
        }
        
        .credits-modal h3 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #1a202c;
        }
        
        .credits-modal p {
            color: #64748b;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 32px;
        }
        
        .credits-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .credits-modal-btn {
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .credits-modal-btn.primary {
            background: #ffffff;
            border: 1px solid #dadce0;
            color: #3c4043;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .credits-modal-btn.primary:hover {
            background: #f8f9fa;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        .credits-modal-btn.secondary {
            background: #f1f5f9;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }
        
        .credits-modal-btn.secondary:hover {
            background: #e2e8f0;
        }
        
        /* 弹窗中的登录按钮样式 - 与右上角保持一致 */
        .modal-signin-btn {
            flex: 1;
            justify-content: center;
            margin: 0;
        }
        
        .google-icon-modal {
            width: 18px;
            height: 18px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjY0IDkuMjA0NTVDMTcuNjQgOC41NjYzNiAxNy41ODM2IDcuOTUyNzMgMTcuNDggNy4zNjM2NEg5VjEwLjg0NTVIMTMuODQzNkMxMy42MzUgMTEuOTcgMTMuMDAwOSAxMi45MjMgMTIuMTEgMTMuNTYxNFYxNS44MTk1SDEzLjk1NjRDMTUuNjU3MyAxNC4yNTI3IDE2LjY0IDEyLjk0NTUgMTcuNjQgOS4yMDQ1NVoiIGZpbGw9IiM0Mjg1RjQiLz4KPHBhdGggZD0iTTkgMThDMTEuNDMgMTggMTMuNDY3MyAxNy4xOTQxIDE0Ljk1NjQgMTUuODE5NUwxMy4xMSAxMy41NjE0QzEyLjQyIDEzLjk5OTEgMTEuNTQgMTQuMjYxNCAxMC4wMzY0IDE0LjI2MTRDNy42NSAxNC4yNjE0IDUuNjcyNzMgMTMuNjA0MSA0LjM2NCA5LjI1SDE2LjI0NTVWNy4zNjM2NEgzLjI3VjE0LjI2MTRDMy4yNyAxNS4wODQxIDQuMDg2MzYgMTcuNjEzNiA5IDE4WiIgZmlsbD0iIzM0QTg1MyIvPgo8cGF0aCBkPSJNMy4zNjM2NCA5LjI3SDBWMTYuMjczNkMwIDExLjUyNzMgMy4zNjM2NCA4LjE2MzY0IDguMSA4LjE2MzY0VjEwLjM0MTRDNi4xNzQ1NSAxMC4zNDE0IDMuNzMwOTEgMTAuNjEzNiAzLjM2MzY0IDEwLjk5MDlWOS4yN1oiIGZpbGw9IiNGQkJDMDQiLz4KPHBhdGggZD0iTTkgNy4xNkM2LjM4MTgyIDcuMTYgNC4yIDkuMzQxODIgMy4zNjM2NCA3LjUwNDU1TDEuNTQwOTEgNS42M0M2LjAwOTA5IDEuMTU0NTUgMTEuNDMgMS4xNTQ1NSAxNi45IDYuNjM2MzZMMTUuMDc3MyA4LjQ1OTA5Qzg1IDcuMzk1NDUgOS40NzI3MyA7LjE2IDkgNy4xNloiIGZpbGw9IiNFQTQzMzUiLz4KPC9zdmc+Cg==') no-repeat center;
            background-size: contain;
        }
        
        /* 退出登录确认弹窗 */
        .signout-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1002;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .signout-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .signout-modal-content {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .signout-modal.active .signout-modal-content {
            transform: scale(1);
        }
        
        .signout-modal h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1a202c;
        }
        
        .signout-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .signout-modal-btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }
        
        .signout-modal-btn.cancel {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .signout-modal-btn.cancel:hover {
            background: #e2e8f0;
        }
        
        .signout-modal-btn.confirm {
            background: #dc2626;
            color: white;
        }
        
        .signout-modal-btn.confirm:hover {
            background: #b91c1c;
        }
        
        /* 用户头像样式 */
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .user-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body>
    <!-- Signout Confirmation Modal -->
    <div class="signout-modal" id="signoutModal">
        <div class="signout-modal-content">
            <h3>Are you sure sign out?</h3>
            <div class="signout-modal-actions">
                <button class="signout-modal-btn cancel" onclick="closeSignoutModal()">Cancel</button>
                <button class="signout-modal-btn confirm" onclick="confirmSignout()">OK</button>
            </div>
        </div>
    </div>

    <!-- Insufficient Credits Modal -->
    <div class="credits-modal" id="creditsModal">
        <div class="credits-modal-content">
            <div class="credits-modal-icon">
                <i class="fas fa-gift"></i>
            </div>
            <h3>🎁 Get Free 20 Credits</h3>
            <p>Sign in with gmail account and start your creating AI images.</p>
            <div class="credits-modal-actions">
                <button class="signin-btn modal-signin-btn" onclick="signInFromModal()">
                    <div class="google-icon"></div>
                    <span>Sign in</span>
                </button>
                <button class="credits-modal-btn secondary" onclick="closeCreditsModal()">
                    <span>Close</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Showcase Modal -->
    <div class="showcase-modal" id="showcaseModal">
        <div class="showcase-content">
            <div class="showcase-indicators" id="showcaseIndicators">
                <!-- Indicators will be generated by JavaScript -->
            </div>
            <img class="showcase-image" id="showcaseImage" src="" alt="AI Generated Showcase">
            <h2 class="showcase-title">FLUX.1 Krea AI Generated Images</h2>
            <button class="showcase-get-started" onclick="closeShowcase(); scrollToGenerator();">
                <i class="fas fa-rocket"></i>
                Get Started
            </button>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo">
                <div class="logo-icon">
                    <img src="https://ciwjjfcuhubjydajazkk.supabase.co/storage/v1/object/public/webstie-icon//FluxKrea%20log-120.png" alt="FluxKrea.me AI Logo">
                </div>
                Flux Krea AI
            </a>
            <ul class="nav-links">
                <li><a href="#features">Features</a></li>
                <li><a href="#showcase" class="active" onclick="openShowcase(); return false;">Showcase</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
            <div class="nav-actions">
                <div class="credits-display" id="creditsDisplay">
                    <i class="fas fa-coins"></i>
                    <span id="creditsAmount">20</span>
                </div>
                <!-- 管理员调试按钮 - 仅对特定账户显示 -->
                <button id="debugRefreshBtn" onclick="reinitializeUser()" style="padding: 4px 8px; font-size: 12px; background: #f59e0b; color: white; border: none; border-radius: 4px; margin-right: 8px; cursor: pointer; display: none;" title="重新加载用户状态 (管理员功能)">
                    🔄 刷新
                </button>
                <div class="signin-btn">
                    <div class="google-icon"></div>
                    <span>Sign in</span>
                </div>
            </div>
        </nav>
    </header>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-badges">
            <span class="badge orange">✅ Free Create</span>
            <span class="badge green">🎉 No-Signup</span>
            <span class="badge blue">🏞️ High-Quality</span>
            <span class="badge purple">🥇 Fast&Realistic</span>
        </div>
        <h1>Create Stunning Images with FLUX.1 Krea Dev Model</h1>
        <p>Turn text into stunning, HQ images with Flux.1 Krea Dev — Powered by 12B-Parameter AI model.</p>
    </section>
    
    <!-- Main Generator -->
    <section id="generator" class="container">
        <div class="main-grid">
            <!-- Left Panel -->
            <div class="card">
                <h2>
                    <i class="fas fa-magic"></i>
                    Generation Mode
                </h2>
                
                <div class="mode-buttons">
                    <button class="mode-btn active" data-mode="text">
                        <i class="fas fa-pen"></i>
                        Text to Image
                    </button>
                </div>
                
                <div class="prompt-section">
                    <h3>Positive Prompt</h3>
                    <textarea 
                        class="prompt-textarea" 
                        id="prompt"
                        placeholder="360 image tiny planet, tiny round planet, urban, the pand in this pic walking tiny planet Norway northern lights, perfectly centered, centered in frame."
                    ></textarea>
                    <button class="copy-btn" onclick="copyPrompt()">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="clear-btn" onclick="clearPrompt()">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
                
                <div style="margin-top: 32px;">
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label>
                                <i class="fas fa-expand-arrows-alt"></i>
                                Image Size
                            </label>
                            <select id="imageSize">
                                <option value="1024x1024">Square HD (1024×1024)</option>
                                <option value="1024x768">Landscape (1024×768)</option>
                                <option value="768x1024">Portrait (768×1024)</option>
                                <option value="512x512">Square (512×512)</option>
                            </select>
                        </div>
                        
                        <div class="slider-container">
                            <label>
                                <i class="fas fa-layer-group"></i>
                                Inference Steps
                                <span class="slider-value" id="stepsValue">4</span>
                            </label>
                            <input type="range" min="1" max="4" value="4" class="slider" id="stepsSlider">
                        </div>
                    </div>
                    
                    <button class="generate-btn" id="generateBtn" onclick="generateImage()">
                        <span class="btn-content">
                            <i class="fas fa-bolt"></i>
                            Generate
                        </span>
                        <span class="credits-cost">-10 Credits</span>
                    </button>
                </div>
            </div>
            
            <!-- Right Panel -->
            <div class="card">
                <h2>Generated Images</h2>
                <p class="card-subtitle">Your AI-generated artwork will appear here</p>
                
                <div id="resultArea">
                    <div class="result-placeholder">
                        <i class="fas fa-image"></i>
                        <h3>No images generated yet</h3>
                        <p>Enter a prompt and click generate to create your first image</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Features Section -->
    <section id="features" class="features-section">
        <div class="container">
            <div class="section-header">
                <h2>Why use FLUX.1 Krea?</h2>
                <p style="margin: 0px 24px; max-width: 1120px; margin-left: auto; margin-right: auto;">FLUX.1 Krea is a state of the art open source text to image model created with an emphasis on aesthetics and photorealism. Unlike other models trained on massive datasets, FLUX.1 Krea was trained on hand curated, high-quality training data to deliver the best results.</p>
                <div style="margin-top: 32px;">
                    <a href="#generator" class="cta-btn primary" onclick="scrollToGenerator()">
                        Try Flux.1 Krea in the main tool
                    </a>
                    <p style="margin-top: 16px; color: #64748b; font-size: 16px;">
                        Free AI image generator. No sign up, no credit card.
                    </p>
                </div>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-image">
                        <img src="https://pic4.zhimg.com/v2-e1374c41f099af1c9714b09a13f4c29f_1440w.jpg" alt="AI Images that Don't Look So AI">
                    </div>
                    <h3>Reality - Don't Look So AI</h3>
                    <p>Our new model offers accurate skin textures, dynamic camera angles, and expressive color. Discover striking visuals in an exceptionally artistic latent space.</p>
                    <button class="demo-btn" onclick="demoGenerate('photorealistic portrait of a person with detailed skin texture, dynamic camera angle, professional photography')">
                        <i class="fas fa-play"></i> Try now
                    </button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-image">
                        <img src="https://pic1.zhimg.com/v2-4dfe15bc9d72a0eaa6048ae2efbb755e_1440w.jpg" alt="Lightning Fast Generation">
                    </div>
                    <h3>Lightning fast</h3>
                    <p>Get high definition images back in seconds. Fast iteration lets you explore, experiment, and evolve your vision without interrupting your flow.</p>
                    <button class="demo-btn" onclick="demoGenerate('a futuristic cityscape at golden hour, high definition, cinematic lighting')">
                        <i class="fas fa-play"></i> Try now
                    </button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-image">
                        <img src="https://picx.zhimg.com/v2-972099fcef030036a5583bd4ba8aac69_1440w.jpg" alt="Free Access">
                    </div>
                    <h3>Free AI Image Generator</h3>
                    <p>Enjoy free FLUX.1 Krea generations on Krea or download the weights and run it on your own hardware. No sign up or credit card required. Generate AI images online for free.</p>
                    <button class="demo-btn" onclick="demoGenerate('beautiful landscape with mountains and lake, golden hour lighting, artistic style')">
                        <i class="fas fa-play"></i> Try now
                    </button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-image">
                        <img src="https://pic4.zhimg.com/v2-c1bbf18cfc3c15c39dff6041451bc9eb_1440w.jpg" alt="Hand Curated Training">
                    </div>
                    <h3>Hand Curated Training Data</h3>
                    <p>Unlike other models trained on massive datasets, FLUX.1 Krea was trained on hand curated, high-quality training data to deliver the best aesthetic results.</p>
                    <button class="demo-btn" onclick="demoGenerate('artistic portrait with exceptional detail and aesthetic composition, professional quality')">
                        <i class="fas fa-play"></i> Try now
                    </button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-image">
                        <img src="https://pic4.zhimg.com/v2-06b9a280b8a4c331a35fca57342956eb_1440w.jpg" alt="Open Source">
                    </div>
                    <h3>Open Source Excellence</h3>
                    <p>FLUX.1 Krea is open source, allowing you to download the weights and run it on your own hardware for complete control and privacy.</p>
                    <button class="demo-btn" onclick="demoGenerate('tech illustration showing open source concept, clean design, modern style')">
                        <i class="fas fa-play"></i> Try now
                    </button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-image">
                        <img src="https://pica.zhimg.com/v2-ffa8c449ab7c46656eb31ac01c4d693c_1440w.jpg" alt="Photorealism">
                    </div>
                    <h3>Emphasis on Photorealism</h3>
                    <p>Created with a special focus on aesthetics and photorealistic results, delivering images that are virtually indistinguishable from real photography.</p>
                    <button class="demo-btn" onclick="demoGenerate('photorealistic nature scene with incredible detail, professional photography style')">
                        <i class="fas fa-play"></i> Try now
                    </button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Testimonials Section -->
    <section class="testimonials-section">
        <div class="container">
            <div class="section-header">
                <h2>Trusted by creators worldwide</h2>
                <p>Join thousands of artists, designers, and creators who use FLUX.1 Krea daily</p>
            </div>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p>"FLUX.1 Krea has revolutionized my creative workflow. The quality is incredible and the speed is unmatched. I can now create professional-grade images in seconds!"</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">S</div>
                        <div>
                            <div class="author-name">Sarah Chen</div>
                            <div class="author-title">Digital Artist</div>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p>"As a marketing professional, I need high-quality visuals fast. FLUX.1 Krea delivers exactly what I need - stunning images that perfectly match my vision."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">M</div>
                        <div>
                            <div class="author-name">Mike Rodriguez</div>
                            <div class="author-title">Marketing Director</div>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p>"The level of detail and realism is mind-blowing. I've tried many AI image generators, but FLUX.1 Krea is in a league of its own."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">E</div>
                        <div>
                            <div class="author-name">Emily Watson</div>
                            <div class="author-title">Freelance Designer</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">50K+</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1M+</div>
                        <div class="stat-label">Images Generated</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">4.9/5</div>
                        <div class="stat-label">User Rating</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">99.9%</div>
                        <div class="stat-label">Uptime</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- FAQ Section -->
    <section id="faq" class="faq-section">
        <div class="container">
            <div class="section-header">
                <h2>Frequently Asked Questions</h2>
                <p>Everything you need to know about FLUX.1 Krea</p>
            </div>
            
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <h3>What is FLUX.1 Krea?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>FLUX.1 Krea is a state-of-the-art AI image generation model that creates high-quality, photorealistic images from text descriptions. It's designed to understand complex prompts and generate professional-grade visuals in seconds.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <h3>How fast is image generation?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>FLUX.1 Krea generates high-quality images in just 4-10 seconds, making it one of the fastest AI image generators available while maintaining exceptional quality.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <h3>Can I use generated images commercially?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! All images generated with FLUX.1 Krea can be used for commercial purposes without restrictions. You own the rights to your generated content.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <h3>What image sizes are supported?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>FLUX.1 Krea supports various aspect ratios including square (1024×1024), landscape (1024×768), and portrait (768×1024) formats, all in high resolution.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <h3>How do I write effective prompts?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Be descriptive and specific. Include details about style, lighting, composition, and mood. For example: "A serene mountain lake at sunset, oil painting style, warm golden lighting, peaceful atmosphere."</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <h3>Is there a free trial available?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! We offer free credits for new users to try FLUX.1 Krea. You can generate several images to experience the quality and speed before upgrading.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="logo footer-logo">
                        <div class="logo-icon">
                    <img src="https://ciwjjfcuhubjydajazkk.supabase.co/storage/v1/object/public/webstie-icon//FluxKrea%20log-120.png" alt="FluxKrea.me AI Logo">
                </div>
                        FluxKrea.me AI
                    </div>
                    <p class="footer-description">
                        Create Stunning Images with FLUX.1 Krea Dev Model
                    </p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Product</h4>
                    <ul class="footer-links">
                        <li><a href="#features">Features</a></li>
                        <li><a href="#showcase" onclick="openShowcase(); return false;">Showcase</a></li>
                        <li><a href="#faq">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Contact</h4>
                    <ul class="footer-links">
                        <li><a href="mailto:tiktree@gmail.com">tiktree@gmail.com</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul class="footer-links">
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Flux Krea AI. All rights reserved. Powered by advanced AI technology.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // Token 现在在服务器端环境变量中，前端不再需要
        
        // Mode switching
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
        
        // Steps slider
        const stepsSlider = document.getElementById('stepsSlider');
        const stepsValue = document.getElementById('stepsValue');
        
        stepsSlider.addEventListener('input', () => {
            stepsValue.textContent = stepsSlider.value;
        });
        
        // Copy prompt function
        function copyPrompt() {
            const prompt = document.getElementById('prompt');
            prompt.select();
            document.execCommand('copy');
            
            const btn = document.querySelector('.copy-btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
            setTimeout(() => {
                btn.innerHTML = originalText;
            }, 2000);
        }
        
        // Clear prompt function
        function clearPrompt() {
            document.getElementById('prompt').value = '';
            document.getElementById('prompt').focus();
        }
        
        // Generate image function
        // Demo generation function
        function demoGenerate(prompt) {
            document.getElementById('prompt').value = prompt;
            generateImage();
            
            // Scroll to generator
            document.getElementById('generator').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        // Scroll to generator function
        function scrollToGenerator() {
            document.getElementById('generator').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        // FAQ toggle function
        function toggleFAQ(element) {
            const faqItem = element.parentElement;
            const isActive = faqItem.classList.contains('active');
            
            // Close all FAQ items
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Open clicked item if it wasn't active
            if (!isActive) {
                faqItem.classList.add('active');
            }
        }
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Showcase functionality
        const showcaseImages = [
            'https://pic4.zhimg.com/v2-e1374c41f099af1c9714b09a13f4c29f_1440w.jpg',
            'https://pic1.zhimg.com/v2-4dfe15bc9d72a0eaa6048ae2efbb755e_1440w.jpg',
            'https://picx.zhimg.com/v2-972099fcef030036a5583bd4ba8aac69_1440w.jpg',
            'https://pic4.zhimg.com/v2-c1bbf18cfc3c15c39dff6041451bc9eb_1440w.jpg',
            'https://pic4.zhimg.com/v2-06b9a280b8a4c331a35fca57342956eb_1440w.jpg',
            'https://pica.zhimg.com/v2-ffa8c449ab7c46656eb31ac01c4d693c_1440w.jpg',
            'https://replicate.delivery/yhqm/VyD24fDyzM2nQSg0nQc58W2EIj16hGcWKrXJozjAMR1BeidTA/out-0.png',
            'https://replicate.delivery/yhqm/6f5TnZKaU3RHSayghFfNxxKjhGusg98XVfDsZjQA43ZI6F7mA/out-0.png',
            'https://replicate.delivery/yhqm/KNewAbWklqwHVyUjZ77YIJb70TmI5vGyni8clSsQYeT38idTA/out-0.png',
            'https://replicate.delivery/yhqm/EIhr0cDHZFoLAFYMA9ezx7AVGie3qHIebTpce4yYnGwt1L2NB/out-0.png',
            'https://replicate.delivery/yhqm/KoWJ5oSwXEq4LFOQjz65rlwvWJ7t4rIeaKkWqonVz5YzeidTA/out-0.png',
            'https://replicate.delivery/yhqm/pNZ3A6l9B35dB9VxE0eGqkGfBGe401MjUttdOyzvpfWbEb6NB/out-0.webp',
            'https://replicate.delivery/yhqm/nTMezRPSm4xXX6yGVVkKePeRMeC0Lwq9p4o02APPeV1mwXsbC/out-0.png',
            'https://replicate.delivery/yhqm/QeGlhr8w4CWefov8rFAozycqveU4anxkYuUVxANfolFP710bC/out-0.webp',
            'https://replicate.delivery/yhqm/74gHlK2Mrc7YL5dnnjopehWLftlfSA8449R6lECKI4OhjN9mA/out-0.webp',
            'https://replicate.delivery/yhqm/hcDDSNf633zeDUz9sWkKfaftcfJLWIvuhn9vfCFWmufxelmemA/out-0.webp'
        ];

        let currentImageIndex = 0;
        let showcaseInterval;

        function initializeShowcase() {
            const modal = document.getElementById('showcaseModal');
            const image = document.getElementById('showcaseImage');
            const indicators = document.getElementById('showcaseIndicators');

            // Create indicators
            indicators.innerHTML = '';
            for (let i = 0; i < showcaseImages.length; i++) {
                const indicator = document.createElement('div');
                indicator.className = 'indicator' + (i === 0 ? ' active' : '');
                indicator.onclick = () => goToImage(i);
                indicators.appendChild(indicator);
            }

            // Show first image
            updateImage();
            
            // Do not auto-show modal - only show when clicked
        }

        function updateImage() {
            const image = document.getElementById('showcaseImage');
            const indicators = document.querySelectorAll('.indicator');
            
            image.src = showcaseImages[currentImageIndex];
            
            // Update indicators
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentImageIndex);
            });
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % showcaseImages.length;
            updateImage();
        }

        function goToImage(index) {
            currentImageIndex = index;
            updateImage();
            stopAutoplay();
            startAutoplay();
        }

        function startAutoplay() {
            showcaseInterval = setInterval(nextImage, 3000); // Change every 3 seconds
        }

        function stopAutoplay() {
            if (showcaseInterval) {
                clearInterval(showcaseInterval);
            }
        }

        function openShowcase() {
            const modal = document.getElementById('showcaseModal');
            
            // Set active state for showcase nav
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector('a[href="#showcase"]').classList.add('active');
            
            // Show modal
            modal.classList.add('active');
            startAutoplay();
        }

        function closeShowcase() {
            const modal = document.getElementById('showcaseModal');
            stopAutoplay();
            modal.classList.remove('active');
            
            // Remove active class from Showcase nav and set to Features
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector('a[href="#features"]').classList.add('active');
        }

        // Initialize showcase when page loads
        document.addEventListener('DOMContentLoaded', initializeShowcase);

        // Pause autoplay when modal is hovered
        document.getElementById('showcaseModal').addEventListener('mouseenter', stopAutoplay);
        document.getElementById('showcaseModal').addEventListener('mouseleave', startAutoplay);
        
        // 积分系统和用户管理 - Supabase集成
        const SUPABASE_URL = 'https://gdcjvqaqgvcxzufmessy.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdkY2p2cWFxZ3ZjeHp1Zm1lc3N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMDY2NTEsImV4cCI6MjA2OTc4MjY1MX0.wIblNpUZLgQcCJCVbKfae5n0jtcIshL9asVIit6iUBI'
        
        // 初始化Supabase客户端
        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
            auth: {
                autoRefreshToken: true,
                persistSession: true,
                detectSessionInUrl: true
            }
        });
        
        // 全局变量
        let currentUser = null;
        let systemSettings = {};
        
        // 加载系统配置
        async function loadSystemSettings() {
            try {
                const { data, error } = await supabaseClient
                    .from('system_settings')
                    .select('key, value, data_type')
                    .eq('is_public', true);
                    
                if (error) throw error;
                
                // 转换为对象格式
                data.forEach(setting => {
                    let value = setting.value;
                    if (setting.data_type === 'integer') {
                        value = parseInt(value);
                    } else if (setting.data_type === 'boolean') {
                        value = value === 'true';
                    }
                    systemSettings[setting.key] = value;
                });
                
                console.log('系统配置加载成功:', systemSettings);
            } catch (error) {
                console.error('加载系统配置失败:', error);
                // 使用默认值
                systemSettings = {
                    default_credits: 20,
                    generation_cost: 10,
                    daily_free_credits: 5,
                    max_daily_generations: 10,
                    maintenance_mode: false,
                    welcome_message: 'Welcome to Flux Krea AI!'
                };
            }
        }
        
        // 高级用户管理系统
        class UserManager {
            constructor() {
                this.currentUser = null;
                this.isInitialized = false;
            }
            
            // 初始化用户管理器
            async initialize() {
                if (this.isInitialized) return;
                
                try {
                    // 检查现有会话
                    const { data: { session } } = await supabaseClient.auth.getSession();
                    if (session) {
                        await this.handleAuthenticatedUser(session.user);
                    } else {
                        await this.handleAnonymousUser();
                    }
                    
                    this.isInitialized = true;
                    console.log('用户管理器初始化完成');
                } catch (error) {
                    console.error('用户管理器初始化失败:', error);
                    // 降级到本地存储模式
                    await this.handleAnonymousUser();
                }
            }
            
            // 处理已认证用户
            async handleAuthenticatedUser(authUser) {
                try {
                    const anonymousUuid = getUserUUID(); // 获取本地匿名 UUID
                    
                    // 设置用户上下文（使用匿名 UUID保持连续性）
                    await supabaseClient.rpc('set_user_context', { user_uuid: anonymousUuid });
                    
                    // 查找现有的用户记录（优先查找匿名用户）
                    let { data: user, error } = await supabaseClient
                        .from('users')
                        .select('*')
                        .eq('uuid', anonymousUuid)
                        .single();
                    
                    if (error && error.code === 'PGRST116') {
                        // 匿名用户不存在，检查是否已有Google用户记录
                        const { data: existingGoogleUser, error: googleError } = await supabaseClient
                            .from('users')
                            .select('*')
                            .eq('google_id', authUser.id)
                            .single();
                        
                        if (!googleError && existingGoogleUser) {
                            // 已有Google用户记录，更新本地UUID为数据库中UUID
                            localStorage.setItem('user_uuid', existingGoogleUser.uuid);
                            user = existingGoogleUser;
                        } else {
                            // 创建新的用户记录（使用本地UUID作主键）
                            user = await this.createUserRecord(authUser, anonymousUuid);
                        }
                    } else if (error) {
                        throw error;
                    }
                    
                    // 升级用户为认证用户（更新认证信息）
                    const { error: updateError } = await supabaseClient
                        .from('users')
                        .update({ 
                            last_seen_at: new Date().toISOString(),
                            is_signed_in: true,
                            google_id: authUser.id,
                            email: authUser.email,
                            name: authUser.user_metadata?.full_name || authUser.email,
                            avatar_url: authUser.user_metadata?.avatar_url
                        })
                        .eq('uuid', anonymousUuid);
                    
                    if (updateError) {
                        console.error('更新用户认证信息失败:', updateError);
                    }
                    
                    // 获取更新后的用户信息
                    const { data: updatedUser } = await supabaseClient
                        .from('users')
                        .select('*')
                        .eq('uuid', anonymousUuid)
                        .single();
                    
                    this.currentUser = { ...updatedUser, ...authUser.user_metadata };
                    currentUser = this.currentUser;
                    
                    this.updateUIForAuthenticatedUser();
                    
                    console.log('用户认证升级成功:', this.currentUser);
                    
                } catch (error) {
                    console.error('处理认证用户失败:', error);
                    await this.handleAnonymousUser();
                }
            }
            
            // 处理匿名用户
            async handleAnonymousUser() {
                const uuid = getUserUUID();
                const fingerprint = generateUserFingerprint();
                const ip = await getUserIP();
                const userIdentifier = await generateUserIdentifier();
                
                try {
                    // 设置匿名用户上下文
                    await supabaseClient.rpc('set_user_context', { user_uuid: uuid });
                    
                    // 查找现有匿名用户
                    let { data: user, error } = await supabaseClient
                        .from('users')
                        .select('*')
                        .eq('uuid', uuid)
                        .single();
                    
                    if (error && error.code === 'PGRST116') {
                        // 创建新的匿名用户记录
                        console.log('用户记录不存在，创建新用户:', uuid);
                        const { data: newUser, error: createError } = await supabaseClient
                            .from('users')
                            .insert({
                                uuid: uuid,
                                user_identifier: userIdentifier,
                                fingerprint: fingerprint,
                                ip_address: ip,
                                user_agent: navigator.userAgent,
                                language: navigator.language,
                                platform: navigator.platform,
                                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                                screen_resolution: `${screen.width}x${screen.height}`,
                                credits: systemSettings.default_credits || 20,
                                total_credits_earned: systemSettings.default_credits || 20
                            })
                            .select()
                            .single();
                        
                        if (createError) throw createError;
                        user = newUser;
                        
                        // 记录初始积分
                        await this.addCreditTransaction(user.id, uuid, 'EARN', systemSettings.default_credits || 20, 
                            '新用户奖励', 'signup_bonus');
                    } else if (error) {
                        throw error;
                    } else {
                        console.log('找到现有用户记录:', { uuid: user.uuid, credits: user.credits });
                        // 检查用户积分是否为0（可能记录被重置了）
                        if (user.credits === 0) {
                            console.log('用户积分为0，重新分配初始积分');
                            const initialCredits = systemSettings.default_credits || 20;
                            await supabaseClient
                                .from('users')
                                .update({ 
                                    credits: initialCredits,
                                    total_credits_earned: (user.total_credits_earned || 0) + initialCredits
                                })
                                .eq('uuid', uuid);
                            user.credits = initialCredits;
                            
                            // 记录积分分配
                            await this.addCreditTransaction(user.id, uuid, 'EARN', initialCredits, 
                                '账户重置奖励', 'reset_bonus');
                        }
                        
                        // 更新最后访问时间
                        await supabaseClient
                            .from('users')
                            .update({ last_seen_at: new Date().toISOString() })
                            .eq('uuid', uuid);
                    }
                    
                    // 匿名用户不给予任何积分或权限
                    this.currentUser = null;
                    currentUser = null;
                    
                    console.log('匿名用户 - 无权限，需要Google登录');
                    this.updateUIForAnonymousUser();
                    
                } catch (error) {
                    console.error('处理匿名用户失败，使用本地模式:', error);
                    this.handleLocalMode();
                }
            }
            
            // 本地存储模式（数据库不可用时的降级方案）
            handleLocalMode() {
                // 本地模式下不创建任何用户，强制要求Google登录
                this.currentUser = null;
                currentUser = null;
                
                console.log('本地模式 - 无用户状态，需要Google登录');
                this.updateUIForAnonymousUser();
            }
            
            
            // 创建用户记录（保持相同UUID）
            async createUserRecord(authUser, existingUuid = null) {
                const userUuid = existingUuid || authUser.id;
                const fingerprint = generateUserFingerprint();
                const ip = await getUserIP();
                const userIdentifier = `${userUuid}_${fingerprint}_${ip}`.replace(/[^a-zA-Z0-9_]/g, '');
                
                const userData = {
                    uuid: userUuid,
                    user_identifier: userIdentifier,
                    fingerprint: fingerprint,
                    ip_address: ip,
                    user_agent: navigator.userAgent,
                    language: navigator.language,
                    platform: navigator.platform,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    screen_resolution: `${screen.width}x${screen.height}`,
                    credits: systemSettings.default_credits || 20,
                    total_credits_earned: systemSettings.default_credits || 20
                };
                
                // 如果是认证用户，添加认证信息
                if (authUser) {
                    userData.is_signed_in = true;
                    userData.google_id = authUser.id;
                    userData.email = authUser.email;
                    userData.name = authUser.user_metadata?.full_name || authUser.email;
                    userData.avatar_url = authUser.user_metadata?.avatar_url;
                }
                
                const { data, error } = await supabaseClient
                    .from('users')
                    .insert(userData)
                    .select()
                    .single();
                
                if (error) throw error;
                
                // 记录初始积分
                await this.addCreditTransaction(
                    data.id, 
                    userUuid, 
                    'EARN', 
                    systemSettings.default_credits || 20, 
                    authUser ? '新用户注册奖励' : '新用户奖励', 
                    authUser ? 'signup_bonus' : 'anonymous_bonus'
                );
                
                return data;
            }
            
            // 更新认证用户界面
            updateUIForAuthenticatedUser() {
                const signinBtn = document.querySelector('.signin-btn');
                if (signinBtn && this.currentUser) {
                    signinBtn.innerHTML = `
                        <img src="${this.currentUser.avatar_url || 'https://via.placeholder.com/32'}" 
                             alt="User Avatar" class="user-avatar">
                    `;
                    signinBtn.onclick = () => this.showUserMenu();
                    signinBtn.style.padding = '4px';
                    signinBtn.style.border = 'none';
                    signinBtn.style.boxShadow = 'none';
                    signinBtn.style.background = 'transparent';
                }
                
                // 检查是否为管理员账户，显示调试按钮
                this.checkAndShowDebugButton();
            }
            
            // 更新匿名用户界面
            updateUIForAnonymousUser() {
                const signinBtn = document.querySelector('.signin-btn');
                if (signinBtn) {
                    signinBtn.innerHTML = `
                        <div class="google-icon"></div>
                        <span>Sign in</span>
                    `;
                    signinBtn.onclick = () => this.signInWithGoogle();
                }
                
                // 隐藏调试按钮（匿名用户）
                const debugBtn = document.getElementById('debugRefreshBtn');
                if (debugBtn) {
                    debugBtn.style.display = 'none';
                }
            }
            
            // 检查管理员权限并显示调试按钮
            checkAndShowDebugButton() {
                const debugBtn = document.getElementById('debugRefreshBtn');
                if (debugBtn && this.currentUser) {
                    // 仅对特定邮箱显示调试按钮
                    const adminEmails = ['sunwei7482@gmail.com'];
                    const userEmail = this.currentUser.email;
                    
                    if (adminEmails.includes(userEmail)) {
                        debugBtn.style.display = 'inline-block';
                        console.log('🔧 管理员调试模式已启用:', userEmail);
                    } else {
                        debugBtn.style.display = 'none';
                    }
                } else if (debugBtn) {
                    debugBtn.style.display = 'none';
                }
            }
            
            // 显示用户菜单
            showUserMenu() {
                showSignoutModal();
            }
            
            // Google登录
            async signInWithGoogle() {
                try {
                    console.log('开始Google登录...');
                    
                    const { data, error } = await supabaseClient.auth.signInWithOAuth({
                        provider: 'google',
                        options: {
                            redirectTo: `${window.location.origin}`,
                            queryParams: {
                                access_type: 'offline',
                                prompt: 'consent',
                            },
                        }
                    });
                    
                    if (error) {
                        console.error('Google登录错误:', error);
                        throw error;
                    }
                    
                    console.log('Google登录成功:', data);
                } catch (error) {
                    console.error('Google登录失败:', error);
                    
                    if (error.message && error.message.includes('provider is not enabled')) {
                        alert('请检查Supabase中的Google OAuth配置：\n1. Authentication > Providers > Google\n2. 确保“Enable sign in with Google”已开启\n3. 检查Client ID和Client Secret是否正确填入');
                    } else {
                        alert('登录失败，请稍后重试：' + (error.message || error));
                    }
                }
            }
            
            // 退出登录
            async signOut() {
                try {
                    const { error } = await supabaseClient.auth.signOut();
                    if (error) throw error;
                    
                    // 重新初始化为匿名用户
                    await this.handleAnonymousUser();
                } catch (error) {
                    console.error('退出登录失败:', error);
                }
            }
            
            // 添加积分交易记录
            async addCreditTransaction(userId, userUuid, type, amount, description, source, relatedResourceId = null) {
                try {
                    const balanceAfter = this.currentUser.credits + (type === 'EARN' ? amount : -amount);
                    
                    const { error } = await supabaseClient
                        .from('credit_transactions')
                        .insert({
                            user_id: userId,
                            user_uuid: userUuid,
                            transaction_type: type,
                            amount: type === 'EARN' ? amount : -amount,
                            balance_after: balanceAfter,
                            description: description,
                            source: source,
                            related_resource_id: relatedResourceId
                        });
                    
                    if (error) throw error;
                } catch (error) {
                    console.error('添加积分交易记录失败:', error);
                }
            }
        }
        function generateUserFingerprint() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = 'top';
            ctx.font = '14px Arial';
            ctx.fillText('User fingerprint', 2, 2);
            
            const fingerprint = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                platform: navigator.platform,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                screen: `${screen.width}x${screen.height}`,
                canvas: canvas.toDataURL()
            };
            
            return btoa(JSON.stringify(fingerprint)).replace(/[^a-zA-Z0-9]/g, '').substring(0, 32);
        }
        
        // 获取或创建用户 UUID
        function getUserUUID() {
            let uuid = localStorage.getItem('user_uuid');
            if (!uuid) {
                uuid = 'user_' + Date.now() + '_' + Math.random().toString(36).substring(2, 15);
                localStorage.setItem('user_uuid', uuid);
            }
            return uuid;
        }
        
        // 获取用户 IP
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.log('无法获取IP地址');
                return 'unknown';
            }
        }
        
        // 生成唯一用户标识
        async function generateUserIdentifier() {
            const uuid = getUserUUID();
            const fingerprint = generateUserFingerprint();
            const ip = await getUserIP();
            
            return `${uuid}_${fingerprint}_${ip}`.replace(/[^a-zA-Z0-9_]/g, '');
        }
        
        // 新的积分管理系统 - 集成Supabase
        class CreditsManager {
            constructor() {
                this.credits = 0;
                this.isInitialized = false;
            }
            
            // 初始化积分管理器
            async initialize(user) {
                this.currentUser = user;
                console.log('积分管理器初始化开始，用户数据:', user);
                
                if (user && !user.is_local_mode) {
                    // 数据库模式 - 从用户数据获取积分
                    this.credits = user.credits || 0;
                    console.log('积分管理器初始化 - 数据库模式:', { 
                        uuid: user.uuid, 
                        email: user.email,
                        credits: this.credits,
                        is_signed_in: user.is_signed_in 
                    });
                    
                    // 如果用户已登录但积分为0，检查是否需要给予初始积分
                    if (user.is_signed_in && this.credits === 0) {
                        console.log('检测到已登录用户积分为0，检查是否已有积分交易记录');
                        
                        // 检查用户是否已有积分交易记录
                        const { data: transactions, error: transError } = await supabaseClient
                            .from('credit_transactions')
                            .select('id')
                            .eq('user_uuid', user.uuid)
                            .limit(1);
                        
                        if (!transError && (!transactions || transactions.length === 0)) {
                            console.log('新用户，没有积分交易记录，给予20积分初始奖励');
                            await this.addCredits(20, '首次登录奖励');
                        } else {
                            console.log('用户已有积分交易记录，不重复给予初始积分');
                        }
                    }
                } else {
                    // 非数据库模式下，不给予任何积分
                    this.credits = 0;
                    console.log('积分管理器初始化 - 无数据库连接，积分为0');
                }
                
                this.updateCreditsDisplay();
                this.isInitialized = true;
                console.log('积分管理器初始化完成，最终积分:', this.credits);
            }
            
            updateCreditsDisplay() {
                const creditsElement = document.getElementById('creditsAmount');
                if (creditsElement) {
                    // 只有真正登录的用户才显示真实积分，否则显示20来吸引登录
                    if (this.currentUser && this.currentUser.is_signed_in && this.currentUser.google_id) {
                        creditsElement.textContent = this.credits;
                    } else {
                        creditsElement.textContent = '20';
                    }
                }
            }
            
            hasEnoughCredits(cost = null) {
                const actualCost = cost || systemSettings.generation_cost || 10;
                return this.credits >= actualCost;
            }
            
            async deductCredits(cost = null) {
                const actualCost = cost || systemSettings.generation_cost || 10;
                
                if (!this.hasEnoughCredits(actualCost)) {
                    return false;
                }
                
                this.credits -= actualCost;
                
                try {
                    if (this.currentUser && !this.currentUser.is_local_mode) {
                        // 更新数据库
                        const { error } = await supabaseClient
                            .from('users')
                            .update({ 
                                credits: this.credits,
                                total_credits_used: (this.currentUser.total_credits_used || 0) + actualCost
                            })
                            .eq('uuid', this.currentUser.uuid);
                        
                        if (error) throw error;
                        
                        // 记录积分交易
                        await userManager.addCreditTransaction(
                            this.currentUser.id, 
                            this.currentUser.uuid, 
                            'SPEND', 
                            actualCost, 
                            '图像生成消费', 
                            'generation'
                        );
                    } else {
                        // 本地存储模式
                        localStorage.setItem('user_credits', this.credits.toString());
                    }
                    
                    this.updateCreditsDisplay();
                    return true;
                } catch (error) {
                    console.error('扣除积分失败:', error);
                    // 回滚积分
                    this.credits += actualCost;
                    this.updateCreditsDisplay();
                    return false;
                }
            }
            
            async addCredits(amount, description = '积分增加') {
                this.credits += amount;
                
                try {
                    if (this.currentUser && !this.currentUser.is_local_mode) {
                        // 更新数据库
                        const { error } = await supabaseClient
                            .from('users')
                            .update({ 
                                credits: this.credits,
                                total_credits_earned: (this.currentUser.total_credits_earned || 0) + amount,
                                updated_at: new Date().toISOString()
                            })
                            .eq('uuid', this.currentUser.uuid);
                        
                        if (error) throw error;
                        
                        // 更新当前用户对象的积分
                        this.currentUser.credits = this.credits;
                        currentUser.credits = this.credits;
                        
                        // 记录积分交易
                        await userManager.addCreditTransaction(
                            this.currentUser.id, 
                            this.currentUser.uuid, 
                            'EARN', 
                            amount,
                            description,
                            'first_login_bonus'
                        );
                    } else {
                        // 本地存储模式
                        localStorage.setItem('user_credits', this.credits.toString());
                    }
                    
                    this.updateCreditsDisplay();
                } catch (error) {
                    console.error('添加积分失败:', error);
                    // 回滚积分
                    this.credits -= amount;
                    this.updateCreditsDisplay();
                }
            }
            
            // 获取积分余额
            getBalance() {
                return this.credits;
            }
        }
        
        
        // 初始化系统
        let userManager;
        let creditsManager;
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // 1. 加载系统配置
                await loadSystemSettings();
                
                // 2. 初始化用户管理器
                userManager = new UserManager();
                await userManager.initialize();
                
                // 3. 初始化积分管理器
                creditsManager = new CreditsManager();
                await creditsManager.initialize(currentUser);
                
                // 4. 初始化其他功能
                initializeShowcase();
                
                // 5. 监听认证状态变化
                supabaseClient.auth.onAuthStateChange(async (event, session) => {
                    console.log('认证状态变化:', event, session);
                    if (event === 'SIGNED_IN' && session) {
                        await userManager.handleAuthenticatedUser(session.user);
                        // 确保用户数据完全更新后再初始化积分管理器
                        console.log('重新初始化积分管理器，当前用户:', currentUser);
                        await creditsManager.initialize(currentUser);
                        console.log('积分管理器重新初始化完成，积分:', creditsManager.credits);
                    } else if (event === 'SIGNED_OUT') {
                        await userManager.handleAnonymousUser();
                        await creditsManager.initialize(currentUser);
                    }
                });
                
                console.log('系统初始化完成');
            } catch (error) {
                console.error('系统初始化失败:', error);
                // 不降级到本地模式，强制要求数据库连接
                alert('系统初始化失败，请刷新页面重试。如果问题持续存在，请联系技术支持。');
                
                // 设置空的管理器，确保无法绕过登录
                userManager = new UserManager();
                currentUser = null;
                creditsManager = new CreditsManager();
                await creditsManager.initialize(null);
                initializeShowcase();
            }
        });
        
        // 图像生成功能 - 完全使用模拟模式
        async function generateImage() {
            console.log('=== 🎯 开始图像生成 ===');
            console.log('当前用户:', currentUser);
            console.log('积分管理器状态:', { 
                credits: creditsManager.credits, 
                isInitialized: creditsManager.isInitialized 
            });
            console.log('系统设置:', systemSettings);
            
            // 1. 强制检查Google登录状态
            console.log('🔍 严格登录检查:', {
                currentUser: currentUser,
                exists: !!currentUser,
                is_signed_in: currentUser?.is_signed_in,
                has_google_id: !!currentUser?.google_id,
                has_email: !!currentUser?.email
            });
            
            // 必须满足：用户存在 + 已登录 + 有Google ID + 有邮箱
            if (!currentUser || 
                !currentUser.is_signed_in || 
                !currentUser.google_id || 
                !currentUser.email) {
                console.log('❌ 未通过Google登录验证，显示登录弹窗');
                showCreditsModal(20, 10);
                return;
            }
            
            console.log('✅ Google登录验证通过，继续生成流程');
            
            // 检查维护模式
            if (systemSettings.maintenance_mode) {
                alert('System is under maintenance, please try again later.');
                return;
            }
            
            // 检查积分
            const generationCost = systemSettings.generation_cost || 10;
            console.log('生成成本:', generationCost);
            console.log('积分检查结果:', creditsManager.hasEnoughCredits(generationCost));
            
            if (!creditsManager.hasEnoughCredits(generationCost)) {
                console.error('积分不足!', {
                    current: creditsManager.credits,
                    required: generationCost
                });
                showCreditsModal(creditsManager.credits, generationCost);
                return;
            }
            
            // 检查每日生成限制
            if (currentUser && currentUser.daily_generation_count >= (systemSettings.max_daily_generations || 10)) {
                alert(`Daily generation limit reached (${systemSettings.max_daily_generations || 10}). Please try again tomorrow.`);
                return;
            }
            
            const prompt = document.getElementById('prompt').value.trim();
            if (!prompt) {
                alert('Please enter a description for the image you want to generate');
                return;
            }
            
            const imageSize = document.getElementById('imageSize').value;
            const steps = parseInt(document.getElementById('stepsSlider').value);
            
            // 先扣除积分
            const deductSuccess = await creditsManager.deductCredits(generationCost);
            if (!deductSuccess) {
                alert('Failed to deduct credits, please try again.');
                return;
            }
            
            const generateBtn = document.getElementById('generateBtn');
            const resultArea = document.getElementById('resultArea');
            let generationRecord = null;
            
            try {
                // 更新UI状态
                generateBtn.disabled = true;
                generateBtn.innerHTML = `
                    <span class="btn-content">
                        <i class="fas fa-spinner fa-spin"></i>
                        Generating...
                    </span>
                    <span class="credits-cost">-${generationCost} Credits</span>
                `;
                
                resultArea.innerHTML = `
                    <div class="generating-status">
                        <div class="loading-spinner"></div>
                        <h3>Generating your image...</h3>
                        <p>Please wait patiently, usually takes 5-15 seconds</p>
                    </div>
                `;
                
                // 记录开始时间
                const startTime = Date.now();
                
                // 创建数据库记录
                if (currentUser && !currentUser.is_local_mode) {
                    console.log('📝 创建数据库生成记录...');
                    const { data, error } = await supabaseClient
                        .from('image_generations')
                        .insert({
                            user_id: currentUser.id,
                            user_uuid: currentUser.uuid,
                            prompt: prompt,
                            image_size: imageSize,
                            inference_steps: steps,
                            credits_cost: generationCost,
                            status: 'processing'
                        })
                        .select()
                        .single();
                    
                    if (!error) {
                        generationRecord = data;
                        console.log('✅ 数据库记录创建成功:', generationRecord.id);
                    } else {
                        console.warn('❌ 数据库记录创建失败:', error);
                    }
                }
                
                // 🎯 调用真实的图像生成API
                console.log('🚀 开始真实图像生成...');
                
                let imageUrl, generationTime;
                
                try {
                    // 调用HuggingFace API生成图像
                    const response = await fetch("https://api-inference.huggingface.co/models/black-forest-labs/FLUX.1-schnell", {
                        method: "POST",
                        headers: {
                            "Authorization": `Bearer hf_your_token_here`, // 需要替换为实际token
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            inputs: prompt,
                            parameters: {
                                num_inference_steps: steps,
                                guidance_scale: 0.0,
                                width: parseInt(imageSize.split('x')[0]),
                                height: parseInt(imageSize.split('x')[1])
                            }
                        }),
                    });
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('HuggingFace API错误:', errorText);
                        
                        // 如果是模型加载中，使用模拟模式
                        if (response.status === 503 || errorText.includes('loading')) {
                            console.log('模型加载中，使用模拟模式...');
                            const simulationResult = await simulateImageGeneration(prompt, imageSize, steps);
                            imageUrl = simulationResult.imageUrl;
                            generationTime = simulationResult.generationTime;
                        } else {
                            throw new Error(`API Error: ${response.status} - ${errorText}`);
                        }
                    } else {
                        // 成功获取图像
                        const blob = await response.blob();
                        const imageBuffer = await blob.arrayBuffer();
                        const imageBase64 = btoa(String.fromCharCode(...new Uint8Array(imageBuffer)));
                        imageUrl = `data:image/png;base64,${imageBase64}`;
                        generationTime = Date.now() - startTime;
                        
                        console.log('✅ 真实API生成完成:', { 
                            generationTime,
                            imageSize: imageBuffer.byteLength 
                        });
                    }
                } catch (apiError) {
                    console.error('API调用失败，使用模拟模式:', apiError);
                    // API失败时使用模拟模式作为备选
                    const simulationResult = await simulateImageGeneration(prompt, imageSize, steps);
                    imageUrl = simulationResult.imageUrl;
                    generationTime = simulationResult.generationTime;
                }
                
                // 更新数据库记录
                if (generationRecord) {
                    console.log('📝 更新数据库记录...');
                    await supabaseClient
                        .from('image_generations')
                        .update({
                            status: 'completed',
                            image_url: imageUrl,
                            generation_time_ms: generationTime,
                            api_request_id: 'flux_' + Date.now(),
                            completed_at: new Date().toISOString()
                        })
                        .eq('id', generationRecord.id);
                    
                    // 更新用户统计
                    await supabaseClient
                        .from('users')
                        .update({
                            images_generated: (currentUser.images_generated || 0) + 1,
                            last_generation_at: new Date().toISOString(),
                            daily_generation_count: (currentUser.daily_generation_count || 0) + 1
                        })
                        .eq('uuid', currentUser.uuid);
                    
                    console.log('✅ 数据库更新完成');
                }
                
                // 显示结果
                resultArea.innerHTML = `
                    <div class="result-success">
                        <img src="${imageUrl}" alt="Generated Image" class="generated-image" />
                        <div class="result-actions">
                            <button onclick="downloadImage('${imageUrl}', 'flux-krea-${Date.now()}.png')" class="action-btn">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button onclick="shareImage('${imageUrl}')" class="action-btn">
                                <i class="fas fa-share"></i> Share
                            </button>
                        </div>
                        <p class="generation-info">Generation time: ${(generationTime / 1000).toFixed(1)}s</p>
                    </div>
                `;
                
                console.log('🎉 图像生成流程完成!');
                
            } catch (error) {
                console.error('❌ 生成图像失败:', error);
                
                // 退还积分
                await creditsManager.addCredits(generationCost);
                console.log('💰 积分已退还');
                
                // 更新数据库记录
                if (generationRecord) {
                    await supabaseClient
                        .from('image_generations')
                        .update({
                            status: 'failed',
                            error_message: error.message,
                            was_refunded: true
                        })
                        .eq('id', generationRecord.id);
                }
                
                // 显示错误
                resultArea.innerHTML = `
                    <div class="result-error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Generation Failed</h3>
                        <p>${error.message}</p>
                        <p>Credits have been refunded automatically</p>
                    </div>
                `;
                
            } finally {
                // 恢复UI状态
                generateBtn.disabled = false;
                generateBtn.innerHTML = `
                    <span class="btn-content">
                        <i class="fas fa-bolt"></i>
                        Generate
                    </span>
                    <span class="credits-cost">-${generationCost} Credits</span>
                `;
            }
        }
        
        // 模拟图像生成（本地测试使用）
        async function simulateImageGeneration(prompt, imageSize, steps) {
            // 模拟生成时间
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            // 创建一个模拟的base64图片 (彩色渐变)
            const canvas = document.createElement('canvas');
            const [width, height] = imageSize.split('x').map(Number);
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            
            // 创建渐变背景
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // 添加提示词文本
            ctx.fillStyle = 'white';
            ctx.font = '24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('✨ 模拟生成', width/2, height/2 - 40);
            ctx.font = '16px Arial';
            ctx.fillText(prompt.substring(0, 50) + (prompt.length > 50 ? '...' : ''), width/2, height/2);
            ctx.fillText(`尺寸: ${imageSize} | 步数: ${steps}`, width/2, height/2 + 40);
            
            return {
                imageUrl: canvas.toDataURL('image/png'),
                generationTime: 3000
            };
        }
        
        // 调用图像生成API（生产环境使用）
        async function callImageGenerationAPI(prompt, imageSize, steps) {
            // 这里需要实现后端代理或使用无CORS限制的API
            // 暂时抛出错误，提示需要后端支持
            throw new Error('生产环境需要后端API代理来避免CORS问题。当前使用模拟模式。');
            
            // 未来的实现示例：
            /*
            const response = await fetch('/api/generate-image', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    prompt: prompt,
                    width: parseInt(imageSize.split('x')[0]),
                    height: parseInt(imageSize.split('x')[1]),
                    num_inference_steps: steps
                })
            });
            
            if (!response.ok) {
                throw new Error(`API请求失败: ${response.status}`);
            }
            
            const result = await response.json();
            return {
                imageUrl: result.imageUrl,
                generationTime: result.generationTime
            };
            */
        }
        
        // 辅助函数
        function downloadImage(imageUrl, filename) {
            const a = document.createElement('a');
            a.href = imageUrl;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        
        function shareImage(imageUrl) {
            if (navigator.share) {
                navigator.share({
                    title: 'Flux Krea AI生成的图像',
                    url: imageUrl
                });
            } else {
                navigator.clipboard.writeText(imageUrl).then(() => {
                    alert('图像链接已复制到剪贴板');
                }).catch(() => {
                    alert('无法复制链接：' + imageUrl);
                });
            }
        }
        
        function demoGenerate(demoPrompt) {
            document.getElementById('prompt').value = demoPrompt;
            document.getElementById('prompt').scrollIntoView({ behavior: 'smooth' });
        }
        
        function copyPrompt() {
            const prompt = document.getElementById('prompt').value;
            navigator.clipboard.writeText(prompt).then(() => {
                alert('描述已复制到剪贴板');
            });
        }
        
        function clearPrompt() {
            document.getElementById('prompt').value = '';
        }
        
        function scrollToGenerator() {
            document.getElementById('generator').scrollIntoView({ behavior: 'smooth' });
        }
        
        // 滑块更新事件监听器
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化滑块事件
            const stepsSlider = document.getElementById('stepsSlider');
            if (stepsSlider) {
                stepsSlider.addEventListener('input', function() {
                    document.getElementById('stepsValue').textContent = this.value;
                });
            }
        });
        
        // 设置用户积分为0（仅管理员可用）
        async function setCreditsToZero() {
            if (!currentUser || currentUser.email !== 'sunwei7482@gmail.com') {
                alert('此功能仅管理员可用');
                return;
            }
            
            try {
                console.log('🔧 设置积分为0进行测试...');
                
                // 更新数据库
                if (!currentUser.is_local_mode) {
                    await supabaseClient
                        .from('users')
                        .update({ credits: 0 })
                        .eq('uuid', currentUser.uuid);
                }
                
                // 更新本地状态
                creditsManager.credits = 0;
                creditsManager.updateCreditsDisplay();
                
                console.log('✅ 积分已设置为0');
                alert('积分已设置为0，可以测试余额不足的情况');
            } catch (error) {
                console.error('设置积分失败:', error);
                alert('设置积分失败：' + error.message);
            }
        }
        
        // 重新初始化用户状态（调试用）
        async function reinitializeUser() {
            console.log('=== 重新初始化用户状态 ===');
            try {
                // 清除本地缓存的用户信息
                currentUser = null;
                
                // 重新初始化用户管理器
                await userManager.initialize();
                
                // 重新初始化积分管理器
                await creditsManager.initialize(currentUser);
                
                console.log('用户状态重新初始化完成:', {
                    user: currentUser,
                    credits: creditsManager.credits
                });
                
                alert(`用户状态已刷新！当前积分：${creditsManager.credits}`);
            } catch (error) {
                console.error('重新初始化失败:', error);
                alert('重新初始化失败：' + error.message);
            }
        }
        
        // 显示退出登录确认弹窗
        function showSignoutModal() {
            const modal = document.getElementById('signoutModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // 关闭退出登录确认弹窗
        function closeSignoutModal() {
            const modal = document.getElementById('signoutModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // 确认退出登录
        function confirmSignout() {
            closeSignoutModal();
            if (userManager) {
                userManager.signOut();
            }
        }
        
        // 检查用户登录状态并显示积分不足弹窗（已移动到下方，避免重复定义）
        
        // 每日预览弹窗显示限制
        let dailyPreviewCount = parseInt(localStorage.getItem('dailyPreviewCount') || '0');
        let lastPreviewDate = localStorage.getItem('lastPreviewDate') || '';
        const today = new Date().toDateString();
        
        // 重置每日计数
        if (lastPreviewDate !== today) {
            dailyPreviewCount = 0;
            localStorage.setItem('lastPreviewDate', today);
        }
        
        // 显示预览弹窗（一天最多3次）
        function showPreviewModal() {
            if (dailyPreviewCount < 3) {
                dailyPreviewCount++;
                localStorage.setItem('dailyPreviewCount', dailyPreviewCount.toString());
                
                // 延迟显示预览弹窗
                setTimeout(() => {
                    openShowcase();
                }, 1000);
            }
        }
        
        // 页面加载时显示预览弹窗
        document.addEventListener('DOMContentLoaded', function() {
            // 页面加载完成后显示预览弹窗
            setTimeout(showPreviewModal, 2000);
        });
        
        // 点击弹窗背景关闭弹窗
        document.addEventListener('DOMContentLoaded', function() {
            const signoutModal = document.getElementById('signoutModal');
            if (signoutModal) {
                signoutModal.addEventListener('click', function(e) {
                    if (e.target === signoutModal) {
                        closeSignoutModal();
                    }
                });
            }
            
            const creditsModal = document.getElementById('creditsModal');
            if (creditsModal) {
                creditsModal.addEventListener('click', function(e) {
                    if (e.target === creditsModal) {
                        closeCreditsModal();
                    }
                });
            }
        });
        
        // 显示积分不足弹窗 - 重新定义以集成登录验证
        function showCreditsModal(currentCredits, requiredCredits) {
            const modal = document.getElementById('creditsModal');
            
            // 检查用户是否已登录
            if (currentUser && currentUser.is_signed_in) {
                // 已登录用户，积分不足，跳转到订阅页面
                console.log('用户已登录但积分不足，应跳转到订阅页面');
                alert('功能开发中：跳转到订阅页面购买积分');
                return;
            }
            
            // 未登录用户，显示登录提示弹窗（固定文案：获取免费20积分）
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // 关闭积分不足弹窗
        function closeCreditsModal() {
            const modal = document.getElementById('creditsModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // 从弹窗登录Google
        function signInFromModal() {
            closeCreditsModal();
            if (userManager) {
                userManager.signInWithGoogle();
            } else {
                alert('User system not initialized. Please refresh the page.');
            }
        }
        
        // 在控制台暴露调试函数
        window.debugFunctions = {
            reinitializeUser,
            setCreditsToZero,
            showCreditsModal: (current = 0, required = 10) => showCreditsModal(current, required), // 测试弹窗
            closeCreditsModal,
            getCurrentUser: () => currentUser,
            getCreditsManager: () => creditsManager,
            getSystemSettings: () => systemSettings
        };
    </script>
</body>
</html>