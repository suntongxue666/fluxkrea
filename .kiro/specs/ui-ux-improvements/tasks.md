# UI/UX改进实施任务列表

## 任务概述

本任务列表将UI/UX改进需求转化为具体的编码任务，按照测试驱动开发的方式，确保每个修改都经过验证。

## 实施任务

- [x] 1. 修改积分不足弹窗按钮显示
  - 更新showCreditsModal函数中的按钮文案逻辑
  - 将已登录用户积分不足时的按钮从"Sign in"改为"Purchase Premium"
  - 更新按钮图标从Google图标改为皇冠图标(fas fa-crown)
  - 确保按钮点击跳转到pricing.html页面功能正常
  - 保持未登录用户显示"Sign in"按钮的原有逻辑
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 2. 简化Pricing页面用户头像显示
  - 修改unified-state-sync.js中的用户显示逻辑
  - 添加页面检测功能，识别当前是否为Pricing页面
  - 为Pricing页面实现简化的用户头像显示（仅头像，无用户名）
  - 移除Pricing页面用户头像的边框和背景样式
  - 确保点击头像显示下拉菜单功能保持正常
  - 确保其他页面的用户显示不受影响
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 3. 创建功能验证测试脚本
  - 编写测试脚本验证积分弹窗按钮修改是否正确
  - 编写测试脚本验证Pricing页面用户显示修改是否正确
  - 测试不同用户状态下的弹窗显示（未登录、积分为0、积分不足）
  - 测试Pricing页面和其他页面的用户显示差异
  - 验证所有按钮点击功能是否正常工作
  - _需求: 3.1, 3.2, 3.3_

- [ ] 4. 更新静态HTML中的弹窗结构
  - 检查并更新index.html中积分弹窗的静态HTML结构
  - 确保弹窗按钮支持动态图标切换
  - 验证弹窗样式在不同状态下的显示效果
  - 测试弹窗在移动端和桌面端的响应式显示
  - _需求: 1.1, 1.2_

- [ ] 5. 添加错误处理和降级方案
  - 为积分弹窗添加DOM元素缺失的错误处理
  - 为Pricing页面用户显示添加页面检测失败的降级方案
  - 添加用户头像加载失败的备用方案
  - 确保在异常情况下用户仍能正常使用基本功能
  - _需求: 3.3_

- [ ] 6. 执行完整功能测试
  - 测试完整的用户流程：未登录 → 登录 → 积分不足 → 跳转Pricing
  - 测试跨页面状态同步：首页登录状态与Pricing页面一致性
  - 验证所有修改不影响现有功能的正常工作
  - 测试不同浏览器和设备上的兼容性
  - 记录测试结果和发现的问题
  - _需求: 3.1, 3.2, 3.3_

## 任务执行说明

### 执行顺序
1. 首先执行任务1和2，完成核心功能修改
2. 然后执行任务3和4，进行验证和优化
3. 最后执行任务5和6，确保稳定性和完整性

### 验证标准
每个任务完成后需要验证：
- 代码修改正确无语法错误
- 功能按预期工作
- 不影响其他功能
- 通过相关测试用例

### 回滚准备
- 每次修改前备份原始代码
- 记录所有修改的文件和行号
- 准备快速回滚方案

## 技术要点

### 关键文件
- `public/index.html` - 积分弹窗HTML结构和showCreditsModal函数
- `public/js/modules/unified-state-sync.js` - 用户状态同步和显示逻辑
- `public/pricing.html` - Pricing页面结构

### 关键函数
- `showCreditsModal(currentCredits, requiredCredits)` - 积分弹窗显示逻辑
- `updateUserDisplay()` - 用户显示更新逻辑（在unified-state-sync.js中）

### 样式考虑
- 使用`fas fa-crown`图标替换Google图标
- Pricing页面用户头像样式：`border: none`, `background: none`
- 保持响应式设计兼容性

## 预期结果

完成所有任务后，用户将体验到：
1. **更清晰的积分引导**：积分不足时看到"Purchase Premium"而非"Sign in"
2. **更简洁的Pricing页面**：用户头像显示更加简洁，减少视觉干扰
3. **保持功能完整性**：所有原有功能正常工作，用户体验得到改善

## 风险提醒

- 修改前务必备份原始文件
- 每次修改后立即测试相关功能
- 注意保持未登录用户的原有体验
- 确保跨页面状态同步不受影响